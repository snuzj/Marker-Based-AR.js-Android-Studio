<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARcamera</title>
    <link rel="icon" href="webcam/pattern_bard.png" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.min.js"></script>
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js" integrity="sha512-6+YN/9o9BWrk6wSfGxQGpt3EUK6XeHi6yeHV+TYD2GR0Sj/cggRpXr1BrAQf0as6XslxomMUxXp2vIl+fv0QRA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
<div id="camera-container">
    <iframe id="ar-iframe"></iframe>
    <button onclick="requestCameraPermission()">Request Camera Permission</button>
    <img id="captured-image" style="display: none;" src="" alt="">
</div>

<script>
        function requestCameraPermission() {
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (stream) {
                    console.log('Camera permission granted');
                    startAR();
                })
                .catch(function (err) {
                    console.error('Error accessing camera:', err);

                    // Handle the error, e.g., show a message to the user
                    alert('Error accessing camera. Please check your camera settings.');
                });
        }

        function startAR() {
            var arIframe = document.getElementById('ar-iframe');
            arIframe.src = 'webcam/webcam.html';
            arIframe.style.display = 'block';
        }
    </script>
</body>
</html>
